<template>
    <div class="main">
        <div>
            <div class="header">
            <router-link to="/home/goods"  tag="svg" t="1541512376403"  class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2233" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25"><path d="M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z" p-id="2234" fill="#8a8a8a"></path></router-link>
            <span>{{ header.shop_name }}</span>
            <svg t="1541512488192" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2452" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25"><path d="M147.01175 430.890704c-44.791136 0-81.108273 36.303834-81.108273 81.109296 0 44.778856 36.316114 81.108273 81.108273 81.108273 44.792159 0 81.109296-36.329417 81.109296-81.108273C228.121046 467.194538 191.804932 430.890704 147.01175 430.890704zM511.999488 430.890704c-44.791136 0-81.108273 36.303834-81.108273 81.109296 0 44.778856 36.316114 81.108273 81.108273 81.108273 44.792159 0 81.109296-36.329417 81.109296-81.108273C593.108784 467.194538 556.791647 430.890704 511.999488 430.890704zM876.987227 430.890704c-44.791136 0-81.108273 36.303834-81.108273 81.109296 0 44.778856 36.316114 81.108273 81.108273 81.108273s81.108273-36.329417 81.108273-81.108273C958.094476 467.194538 921.778362 430.890704 876.987227 430.890704z" p-id="2453" fill="#8a8a8a"></path></svg>
        </div>
        <div class="sc-kGXeez jokmto">
            <div class="sc-kpOJdX cQHFIx">
                <div class="sc-dxgOiQ fAbHwE">
                    <div class="sc-ckVGcZ haSPZA">
                        <img class="sc-jKJlTe fybUyr" :src="header.logo_url"></div>
                    <div class="sc-eNQAEJ iuwpVa">
                        <p class="sc-hMqMXs ggRoE">{{ header.shop_name }}</p>
                        <p class="sc-kEYyzF jpfFsg">{{ header.store_info }}</p>
                    </div>
                    <div class="svg">
                        <svg t="1541513660672" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5219" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25">><path d="M971.264 669.696l-163.84 0 0-163.84c0-5.632-4.608-10.24-10.24-10.24l-40.96 0c-5.632 0-10.24 4.608-10.24 10.24l0 163.84-163.84 0c-5.632 0-10.24 4.608-10.24 10.24l0 40.96c0 5.632 4.608 10.24 10.24 10.24l163.84 0 0 163.84c0 5.632 4.608 10.24 10.24 10.24l40.96 0c5.632 0 10.24-4.608 10.24-10.24l0-163.84 163.84 0c5.632 0 10.24-4.608 10.24-10.24l0-40.96C981.504 674.304 976.896 669.696 971.264 669.696zM331.776 164.352c59.392 0 115.712 23.04 158.72 64.512l21.504 20.992 21.504-20.992c43.008-41.472 99.328-64.512 158.72-64.512 125.44 0 227.84 102.4 227.84 227.84 0 18.432-3.584 37.376-10.24 57.344 0 0-3.072 9.216-3.072 14.336 0 16.896 13.824 30.72 30.72 30.72 14.848 0 25.6-14.848 30.208-25.088 4.096-9.216 14.336-51.712 14.336-77.312 0-159.744-129.536-289.28-289.28-289.28-66.048 0-129.024 22.016-180.224 62.976l0 0c-51.2-40.96-114.176-62.976-180.224-62.976-159.744 0-289.28 129.536-289.28 289.28 0 203.776 333.312 440.32 434.688 507.392 0.512 0.512 1.536 1.024 1.536 1.024 0 0 10.24 4.608 15.872 4.608 16.896 0 30.72-13.824 30.72-30.72 0-10.752-5.632-20.48-14.336-25.6l0 0c-127.488-81.92-408.064-294.912-408.064-456.704C103.936 266.752 206.336 164.352 331.776 164.352z" p-id="5220" fill="#8a8a8a"></path></svg>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="nav">
            <ul>
                <router-link :to="{ query: {shop_id:$route.query.shop_id,list:index }}" tag="li" v-for="(nav,index) of navs" :key="index"  >
                    <span @click="navClick">{{ nav.title?nav.title:nav.text }}</span>
                </router-link>
            </ul>
        </div>
        <showList :message="message" :id="id"></showList>
        </div>
    </div>
</template>

<script>
import axios from 'utils/axios.js'
import BScroll from 'better-scroll'
import showList from 'components/common/showList/showList.vue'
import { Indicator } from 'mint-ui';
    export default{
        data(){
            return {
                header:[],
                navs:[],
                message:{},
                id:''
            }
        },
        components:{
            showList
        },
        methods:{
            goback(){
                this.$router.go(-1)
            },
            navClick(){
                 this.id = this.$route.query.list
            }
        },
        async beforeCreate()  {
            Indicator.open({
                text: '加载中...',
                spinnerType: 'fading-circle'
            })
            let id = this.$route.query.shop_id
            const mess = await axios({
                method:'get',
                url:"/api/getBrandGoods?page=1&brand_id=1331677_"+id+"&msort=1&goods_utype=C4&price_range=&cat_threeids="
            })
            this.message = mess
            
            this.header = mess.brandInfo
            this.navs = mess.msort?mess.msort:mess.floor_bar
            Indicator.close()
            this.id = this.$route.query.list
            this.message.store_name = this.header.shop_name
            // console.log(this.message)
        },
        mounted(){
            let bScroll = new BScroll('.main',{
                click:true,
                probeType:1,
                pullUpLoad: {
                    threshold: 50
                }
            }) 
        }

    }
</script>

<style lang="stylus" scoped>
@import '~styles/border.styl'
.main
    width 100%
    height 100%
    overflow hidden
    background #fff
    div
        overflow hidden
        .header 
            width 100%
            height .44rem
            display flex
            align-items center
            padding 0 .1rem 0
            svg:nth-child(1)
                flex 24
            span 
                flex 301
                text-align center
            svg:nth-child(2)
                flex 30
        .jokmto 
            background url(https://web.juanpi.com/static/media/brand_bg.15e6f457.png) repeat
            padding .1rem
            height .95rem
            width 100%
            .cQHFIx 
                background #fff
                padding .10rem 0 .10rem .10rem
                height .75rem
                .fAbHwE
                    width 100%
                    height 100%
                    display flex
                    overflow hidden
                    .haSPZA
                        flex 66
                        display flex
                        align-items center
                        img 
                            width 100%
                            height .23rem
                    .iuwpVa
                        margin-left .1rem
                        flex 355
                        display flex
                        flex-direction column
                        .ggRoE
                            flex 60
                            line-height .3rem
                        .jpfFsg
                            flex 32
                            color #333
                            opacity 0.5
                            
                    .svg
                        flex 68
                        display flex
                        align-items center
        .nav    
            width 100%
            height .40rem
            ul
                width 100%
                height 100%
                display flex
                justify-content center
                align-items center
                li
                    flex 1
                    height 100%
                    text-align center
                    line-height .4rem

                .active
                    color #ff464e
                    border-bottom .02rem solid #ff464e    


    
    
</style>


